apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../base

# Override the base configmaps and secrets with production values
configMapGenerator:
  - name: snapcd-runner-config
    behavior: replace
    files:
      - config/appsettings.json
  - name: snapcd-runner-ssh
    behavior: replace
    files:
      - config/known_hosts
  - name: snapcd-runner-hooks
    behavior: replace
    files:
      - config/preapproved-hooks/.gitkeep
      # Add your hook scripts here, e.g.:
      # - config/preapproved-hooks/my-hook.sh

secretGenerator:
  - name: snapcd-runner-ssh-key
    behavior: replace
    files:
      - config/id_rsa
    type: Opaque
  - name: snapcd-runner-credentials
    behavior: replace
    envs:
      - config/secret.env
    type: Opaque

generatorOptions:
  disableNameSuffixHash: true
